#! /bin/sh
#=========================================================#
# Ejecutar ./configure
# Libreria para Vegnux NeonatoX OS
# Proyecto Venezolano VegnuX <http://www.vegnux.org.ve>
# Por:
# Carlos SÃ¡nchez <mkl.vegnux@gmail.com>
# Nehemias Velasquez <nehe009@gmail.com>
# 2007 - 2012
# GPLv3
# This program comes with ABSOLUTELY NO WARRANTY.
#=========================================================#
# Identity of this package.
PACKAGE_NAME='libneonatox'
PACKAGE_TARNAME='libneonatox'
PACKAGE_VERSION='0.6.1'
PACKAGE_STRING='libneonatox-0.6.1'
PACKAGE_BUGREPORT='nehe009@gmail.com'

default_prefix="/usr"
default_libdir="${default_prefix}/lib"

echo $PACKAGE_STRING
echo "Directorios de instalacion por defecto:"
echo $default_prefix
echo $default_libdir

INSTALL_DIR=$default_prefix
LIBDIR=$default_libdir
SHELL=/bin/bash
MODE=754
DIRMODE=755
CONFMODE=644

cat << EOT > Makefile
create-dirs:
	install -d -m ${DIRMODE} ${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	install -d -m ${DIRMODE} ${INSTALL_DIR}/share/pixmaps
	install -d -m ${DIRMODE} ${INSTALL_DIR}/share/applications
	install -d -m ${DIRMODE} ${INSTALL_DIR}/bin
	install -d -m ${DIRMODE} ${LIBDIR}/${PACKAGE_NAME}
	install -d -m ${DIRMODE} ${INSTALL_DIR}/share/${PACKAGE_NAME}
	
all : create-dirs
	install -m ${MODE} scripts/*	${LIBDIR}/${PACKAGE_NAME}
	install -m ${MODE} lib/*	${LIBDIR}/${PACKAGE_NAME}
	install -m ${MODE} icons/*	${INSTALL_DIR}/share/pixmaps
	install -m ${MODE} AUTHORS	${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} COPYING	${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} NEWS	${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} THANKS	${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/addnewuser	${INSTALL_DIR}/bin/addnewuser
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/changepassroot	${INSTALL_DIR}/bin/changepassroot
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/findpart	${INSTALL_DIR}/bin/findpart
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/infouser	${INSTALL_DIR}/bin/infouser
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/neoupdate	${INSTALL_DIR}/bin/neoupdate
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${INSTALL_DIR}/bin/update-grub
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${INSTALL_DIR}/bin/update-grub2
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${INSTALL_DIR}/bin/updategrub2


install : all 

uninstall :
	rm -rf ${LIBDIR}/${PACKAGE_NAME}
	rm -rf ${INSTALL_DIR}/share/doc/${PACKAGE_NAME}
	rm -rf ${INSTALL_DIR}/share/pixmaps/neoupdate.png
	rm -rf ${INSTALL_DIR}/bin/addnewuser
	rm -rf ${INSTALL_DIR}/bin/changepassroot
	rm -rf ${INSTALL_DIR}/bin/findpart
	rm -rf ${INSTALL_DIR}/bin/infouser
	rm -rf ${INSTALL_DIR}/bin/neoupdate
	rm -rf ${INSTALL_DIR}/bin/update{-grub{,2},grub2}
	
.PHONY:
	create-dirs all install uninstall

EOT

echo "Makefile generado correctamente, Para instalar escriba 'make install'"

#install -m ${MODE} data/*.desktop	${INSTALL_DIR}/share/applications
#install -m ${MODE} data/*.png	${INSTALL_DIR}/share/pixmaps
#install -m ${MODE} doc/*	${INSTALL_DIR}/share/doc/${PACKAGE_NAME}

