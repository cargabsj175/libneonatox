#! /bin/sh
#=========================================================#
# Ejecutar ./configure
# Libreria para Vegnux NeonatoX OS
# Proyecto Venezolano VegnuX <http://www.vegnux.org.ve>
# Por:
# Carlos SÃ¡nchez <mkl.vegnux@gmail.com>
# Nehemias Velasquez <nehe009@gmail.com>
# 2007 - 2012
# GPLv3
# This program comes with ABSOLUTELY NO WARRANTY.
#=========================================================#
# Identity of this package.
PACKAGE_NAME='libneonatox'
PACKAGE_TARNAME='libneonatox'
PACKAGE_VERSION='0.6.1'
PACKAGE_STRING='libneonatox-0.6.1'
PACKAGE_BUGREPORT='nehe009@gmail.com'

default_prefix="/usr"
default_libdir="${default_prefix}/lib"

echo $PACKAGE_STRING
echo "Directorios de instalacion por defecto:"
echo $default_prefix
echo $default_libdir

DESTDIR=$default_prefix
LIBDIR=$default_libdir
SHELL=/bin/bash
MODE=755
DIRMODE=754
CONFMODE=644

cat << EOT > Makefile
create-dirs:
	install -d -m ${DIRMODE} ${DESTDIR}/share/doc/${PACKAGE_NAME}
	install -d -m ${DIRMODE} ${DESTDIR}/share/pixmaps
	install -d -m ${DIRMODE} ${DESTDIR}/share/applications
	install -d -m ${DIRMODE} ${DESTDIR}/bin
	install -d -m ${DIRMODE} ${LIBDIR}/${PACKAGE_NAME}
	install -d -m ${DIRMODE} ${DESTDIR}/share/${PACKAGE_NAME}
	
all : create-dirs
	install -m ${MODE} scripts/*	${LIBDIR}/${PACKAGE_NAME}
	install -m ${MODE} lib/*	${LIBDIR}/${PACKAGE_NAME}
	install -m ${MODE} data/*.png	${DESTDIR}/share/pixmaps
	install -m ${MODE} data/*.desktop ${DESTDIR}/share/applications
	install -m ${MODE} man/* ${DESTDIR}/share/man/man8
	install -m ${MODE} AUTHORS	${DESTDIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} COPYING	${DESTDIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} NEWS	${DESTDIR}/share/doc/${PACKAGE_NAME}
	install -m ${MODE} THANKS	${DESTDIR}/share/doc/${PACKAGE_NAME}
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/addnewuser	${DESTDIR}/bin/addnewuser
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/changepassroot	${DESTDIR}/bin/changepassroot
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/findpart	${DESTDIR}/bin/findpart
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/infouser	${DESTDIR}/bin/infouser
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/neoupdate	${DESTDIR}/bin/neoupdate
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${DESTDIR}/bin/update-grub
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${DESTDIR}/bin/update-grub2
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/updategrub2	${DESTDIR}/bin/updategrub2
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/split4nho	${DESTDIR}/bin/split4nho
	ln -sf ${LIBDIR}/${PACKAGE_NAME}/repo2html	${DESTDIR}/bin/repo2html
	ln -sf updategrub2.8 ${DESTDIR}/share/man/man8/update-grub2.8
	ln -sf updategrub2.8 ${DESTDIR}/share/man/man8/update-grub.8
	
install : all 

uninstall :
	rm -rf ${LIBDIR}/${PACKAGE_NAME}
	rm -rf ${DESTDIR}/share/doc/${PACKAGE_NAME}
	rm -rf ${DESTDIR}/share/pixmaps/neoupdate.png
	rm -rf ${DESTDIR}/share/applications/neoupdate.desktop
	rm -rf ${DESTDIR}/bin/addnewuser
	rm -rf ${DESTDIR}/bin/changepassroot
	rm -rf ${DESTDIR}/bin/findpart
	rm -rf ${DESTDIR}/bin/infouser
	rm -rf ${DESTDIR}/bin/neoupdate
	rm -rf ${DESTDIR}/bin/update{-grub{,2},grub2}
	rm -rf ${DESTDIR}/bin/split4nho
	rm -rf ${DESTDIR}/bin/repo2html
	rm -rf ${DESTDIR}/share/man/man8/addnewuser.8
	rm -rf ${DESTDIR}/share/man/man8/changepassroot.8
	rm -rf ${DESTDIR}/share/man/man8/findpart.8
	rm -rf ${DESTDIR}/share/man/man8/infouser.8
	rm -rf ${DESTDIR}/share/man/man8/libneonatox.8
	rm -rf ${DESTDIR}/share/man/man8/neoupdate.8
	rm -rf ${DESTDIR}/share/man/man8/update{-grub{,2},grub2}.8
	rm -rf ${DESTDIR}/share/man/man8/split4nho.8
	rm -rf ${DESTDIR}/share/man/man8/repo2html.8
.PHONY:
	create-dirs all install uninstall

EOT

echo "Makefile generado correctamente, Para instalar escriba 'make install'"

#install -m ${MODE} data/*.desktop	${DESTDIR}/share/applications
#install -m ${MODE} data/*.png	${DESTDIR}/share/pixmaps
#install -m ${MODE} doc/*	${DESTDIR}/share/doc/${PACKAGE_NAME}

